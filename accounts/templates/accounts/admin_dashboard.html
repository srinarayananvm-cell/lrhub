{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <!-- Breadcrumb -->
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item active" aria-current="page">
        Admin Dashboard
      </li>
    </ol>
  </nav>

  <h3><i class="fas fa-users-cog me-2"></i> Admin Dashboard</h3>

  <!-- Search form -->
  <form method="get" class="input-group mb-3">
    <input type="text" name="q" class="form-control" placeholder="Search by username" value="{{ request.GET.q }}">
    <button class="btn btn-outline-primary" type="submit">
      <i class="fas fa-search"></i> Search
    </button>
  </form>

  <a href="{% url 'add_user' %}" class="btn btn-success mb-3">
    <i class="fas fa-user-plus"></i> Add User
  </a>

  {% if users %}
  <table class="table table-striped shadow-sm">
    <thead>
      <tr>
        <th>Username</th>
        <th>Email</th>
        <th>Role</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for u in users %}
      <tr>
        <td>{{ u.username }}</td>
        <td>{{ u.email }}</td>
        <td>{{ u.profile.role }}</td>
        <td>
          <a href="{% url 'edit_user' u.id %}" class="btn btn-sm btn-primary">
            <i class="fas fa-edit"></i> Edit
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <div class="alert alert-info">No users to display. Please search by username.</div>
  {% endif %}
</div>
{% endblock %}
